# Repository Cleanup Manifest
# Phase 2 Execution Instructions
# Generated: 2025-09-26
# Branch: repo-slim/PH1-discovery

version: "1.0"
metadata:
  total_size_before: "142.41 MB"
  estimated_size_after: "23 MB"
  estimated_reduction: "119.5 MB (84%)"
  safety_mode: "MOVE_TO_GRAVEYARD"

# Actions to perform in Phase 2
# Each action will be executed in order
# If any action fails, the script will stop and rollback

actions:
  # Critical Large Files (104.14 MB)
  - action: MOVE
    path: "PowerShell-7.4.6-win-x64.msi"
    destination: "__graveyard__/installers/"
    reason: "Binary installer file should not be in source control"
    evidence_of_unused: "Not referenced in any code, scripts, or configs"
    size: "104.14 MB"
    risk_level: "LOW"
    rollback_notes: "Move back from __graveyard__/installers/"

  # Python Virtual Environment (10.55 MB)
  - action: MOVE
    path: ".venv/"
    destination: "__graveyard__/python_venv/"
    reason: "Python virtual environment - local development only"
    evidence_of_unused: "Already in .gitignore, accidentally committed"
    size: "10.55 MB"
    risk_level: "LOW"
    rollback_notes: "Move back from __graveyard__/python_venv/"

  # Large Audit Reports (9.15 MB)
  - action: MOVE
    path: "audit-reports/quantum-audit-2025-09-21T23-12-16-166Z.json"
    destination: "__graveyard__/large_reports/"
    reason: "Large generated report - should be in CI/CD artifacts"
    evidence_of_unused: "Generated report, can be regenerated"
    size: "9.15 MB"
    risk_level: "LOW"
    rollback_notes: "Move back from __graveyard__/large_reports/"

  # Build Artifacts - Design System (1.5 MB)
  - action: MOVE
    path: "design-system/dist/"
    destination: "__graveyard__/build_artifacts/design-system/"
    reason: "Build output - generated from source"
    evidence_of_unused: "Generated by build process, in .gitignore"
    size: "1.5 MB"
    risk_level: "LOW"
    rollback_notes: "Run build to regenerate or move back"

  # Build Artifacts - Frontend (1.8 MB)
  - action: MOVE
    path: "frontend/dist/"
    destination: "__graveyard__/build_artifacts/frontend/"
    reason: "Build output - generated from source"
    evidence_of_unused: "Generated by build process, in .gitignore"
    size: "1.8 MB"
    risk_level: "LOW"
    rollback_notes: "Run build to regenerate or move back"

  # Token Backup Files (900 KB)
  - action: MOVE
    path: "design-system/design-tokens.backup-*.json"
    destination: "__graveyard__/redundant_backups/token_backups/"
    reason: "Redundant backup files - 13 copies of same file"
    evidence_of_unused: "Multiple backups of same 40KB file"
    size: "520 KB"
    risk_level: "LOW"
    rollback_notes: "Not needed, current file exists"

  # Token Sync Backup Files (900 KB)
  - action: MOVE
    path: "design-system/design-tokens.sync-backup-*.json"
    destination: "__graveyard__/redundant_backups/token_sync_backups/"
    reason: "More redundant backup files"
    evidence_of_unused: "Duplicate sync backups"
    size: "280 KB"
    risk_level: "LOW"
    rollback_notes: "Not needed, current file exists"

  # Additional Token Backups
  - action: MOVE
    path: "design-system/design-tokens.backup.json"
    destination: "__graveyard__/redundant_backups/"
    reason: "Generic backup file"
    evidence_of_unused: "Redundant with versioned backups"
    size: "40 KB"
    risk_level: "LOW"
    rollback_notes: "Not needed"

  - action: MOVE
    path: "design-system/design-tokens.backup-pre-fix-2025-09-25T13-22-13.json"
    destination: "__graveyard__/redundant_backups/"
    reason: "Old pre-fix backup"
    evidence_of_unused: "Fix already applied"
    size: "40 KB"
    risk_level: "LOW"
    rollback_notes: "Not needed"

  # Wrangler Cache (708 KB)
  - action: MOVE
    path: ".wrangler/"
    destination: "__graveyard__/caches/wrangler/"
    reason: "Wrangler local cache"
    evidence_of_unused: "Local cache, regenerated on dev"
    size: "708 KB"
    risk_level: "LOW"
    rollback_notes: "Will regenerate on next wrangler dev"

  # Coverage Reports (227 KB)
  - action: MOVE
    path: "coverage/"
    destination: "__graveyard__/generated_reports/coverage/"
    reason: "Test coverage reports"
    evidence_of_unused: "Generated by test runs, in .gitignore"
    size: "227 KB"
    risk_level: "LOW"
    rollback_notes: "Run tests with coverage to regenerate"

  # Log Files
  - action: MOVE
    path: "compilation_check.log"
    destination: "__graveyard__/temp_files/"
    reason: "Compilation log file"
    evidence_of_unused: "Temporary build output"
    size: "591 KB"
    risk_level: "LOW"
    rollback_notes: "Not needed"

  - action: MOVE
    path: "tsc_errors.txt"
    destination: "__graveyard__/temp_files/"
    reason: "TypeScript error output"
    evidence_of_unused: "Temporary error log"
    size: "493 KB"
    risk_level: "LOW"
    rollback_notes: "Not needed"

  - action: MOVE
    path: "test-output.txt"
    destination: "__graveyard__/temp_files/"
    reason: "Test output file"
    evidence_of_unused: "Temporary test output"
    size: "1 KB"
    risk_level: "LOW"
    rollback_notes: "Not needed"

  - action: MOVE
    path: "file_list.txt"
    destination: "__graveyard__/temp_files/"
    reason: "Empty temp file"
    evidence_of_unused: "Temporary file, empty"
    size: "0 KB"
    risk_level: "LOW"
    rollback_notes: "Not needed"

  # Test Scripts in Root
  - action: MOVE
    path: "test-claude-integration-simple.js"
    destination: "__graveyard__/misplaced_tests/"
    reason: "Test file in root directory"
    evidence_of_unused: "Should be in tests/ directory"
    size: "7.4 KB"
    risk_level: "LOW"
    rollback_notes: "Move to tests/ if needed"

  - action: MOVE
    path: "test-jwt-bypass-prevention.js"
    destination: "__graveyard__/misplaced_tests/"
    reason: "Test file in root directory"
    evidence_of_unused: "Should be in tests/ directory"
    size: "3.7 KB"
    risk_level: "LOW"
    rollback_notes: "Move to tests/ if needed"

  - action: MOVE
    path: "test-payment-security.js"
    destination: "__graveyard__/misplaced_tests/"
    reason: "Test file in root directory"
    evidence_of_unused: "Should be in tests/ directory"
    size: "18.2 KB"
    risk_level: "LOW"
    rollback_notes: "Move to tests/ if needed"

  - action: MOVE
    path: "test-performance-optimization.js"
    destination: "__graveyard__/misplaced_tests/"
    reason: "Test file in root directory"
    evidence_of_unused: "Should be in tests/ directory"
    size: "11.8 KB"
    risk_level: "LOW"
    rollback_notes: "Move to tests/ if needed"

  - action: MOVE
    path: "test-security-validation.js"
    destination: "__graveyard__/misplaced_tests/"
    reason: "Test file in root directory"
    evidence_of_unused: "Should be in tests/ directory"
    size: "9.5 KB"
    risk_level: "LOW"
    rollback_notes: "Move to tests/ if needed"

  - action: MOVE
    path: "test-vibesdk-claude.js"
    destination: "__graveyard__/misplaced_tests/"
    reason: "Test file in root directory"
    evidence_of_unused: "Should be in tests/ directory"
    size: "5.2 KB"
    risk_level: "LOW"
    rollback_notes: "Move to tests/ if needed"

  - action: MOVE
    path: "test-worker.js"
    destination: "__graveyard__/misplaced_tests/"
    reason: "Test file in root directory"
    evidence_of_unused: "Should be in tests/ directory"
    size: "1.9 KB"
    risk_level: "LOW"
    rollback_notes: "Move to tests/ if needed"

  # Server Scripts in Root
  - action: MOVE
    path: "server-dev.js"
    destination: "__graveyard__/dev_helpers/"
    reason: "Development server script in root"
    evidence_of_unused: "Development helper, not for production"
    size: "19.7 KB"
    risk_level: "LOW"
    rollback_notes: "Move to scripts/ if needed"

  - action: MOVE
    path: "server-production.js"
    destination: "__graveyard__/dev_helpers/"
    reason: "Server script in root"
    evidence_of_unused: "Should be in scripts/ or server/"
    size: "16.9 KB"
    risk_level: "LOW"
    rollback_notes: "Move to scripts/ if needed"

  - action: MOVE
    path: "server-simple.js"
    destination: "__graveyard__/dev_helpers/"
    reason: "Server script in root"
    evidence_of_unused: "Should be in scripts/ or server/"
    size: "9.0 KB"
    risk_level: "LOW"
    rollback_notes: "Move to scripts/ if needed"

  # MCP Config Text File
  - action: MOVE
    path: "mcp-coreflow.json.txt"
    destination: "__graveyard__/temp_files/"
    reason: "Text copy of JSON config"
    evidence_of_unused: "Duplicate of actual config"
    size: "1 KB"
    risk_level: "LOW"
    rollback_notes: "Not needed"

# Files to explicitly KEEP
keep:
  - path: "src/"
    reason: "Core application code"
  - path: "frontend/src/"
    reason: "Frontend source code"
  - path: "database/"
    reason: "Database schemas and migrations"
  - path: "scripts/"
    reason: "Build and deployment scripts"
  - path: ".github/"
    reason: "GitHub Actions workflows"
  - path: "tests/"
    reason: "Test suites"
  - path: "docs/"
    reason: "Documentation"
  - path: "package.json"
    reason: "Project configuration"
  - path: "package-lock.json"
    reason: "Dependency lock file"
  - path: "wrangler.toml"
    reason: "Cloudflare configuration"
  - path: "tsconfig.json"
    reason: "TypeScript configuration"
  - path: ".gitignore"
    reason: "Git ignore rules"
  - path: "README.md"
    reason: "Project documentation"
  - path: "Dockerfile"
    reason: "Docker configuration"
  - path: "design-system/design-tokens.json"
    reason: "Current design tokens"

# Validation steps after each batch
validation:
  - step: "npm run type-check"
    description: "Verify TypeScript compilation"
    on_failure: "ROLLBACK"

  - step: "npm run test"
    description: "Run test suite"
    on_failure: "ROLLBACK"

  - step: "wrangler deploy --dry-run"
    description: "Verify Cloudflare deployment"
    on_failure: "ROLLBACK"

# Summary statistics
summary:
  total_actions: 30
  total_size_to_move: "119.5 MB"
  estimated_time: "5-10 minutes"
  rollback_available: true
  safety_level: "HIGH - All moves, no deletes"